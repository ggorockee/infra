# Scrape Service Configuration
scrape:
  enabled: true
  image:
    repository: ggorockee/fridge2fork-scrape
    tag: sha-8992dffe
    pullPolicy: IfNotPresent
  
  service:
    type: ClusterIP
    port: 8080
    targetPort: 8080
  
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "200m"
  
  replicas: 1
  
  # ServiceAccount configuration
  serviceAccount:
    create: true
    annotations: {}
    name: ""
  
  # Pod security context
  podSecurityContext:
    fsGroup: 2000
  
  # Container security context
  securityContext:
    capabilities:
      drop:
      - ALL
    readOnlyRootFilesystem: true
    runAsNonRoot: true
    runAsUser: 1000
  
  # Pod annotations
  podAnnotations: {}
  
  # Image pull secrets
  imagePullSecrets: []
  
  # Node selector
  nodeSelector: {}
  
  # Tolerations
  tolerations: []
  
  # Affinity
  affinity: {}
  
  # Autoscaling
  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 100
    targetCPUUtilizationPercentage: 80
  
  # Environment variables
  env:
    - name: DATABASE_URL
      valueFrom:
        secretKeyRef:
          name: fridge2fork-db-credentials
          key: database-url
    - name: DB_HOST
      valueFrom:
        secretKeyRef:
          name: fridge2fork-db-credentials
          key: host
    - name: DB_PORT
      valueFrom:
        secretKeyRef:
          name: fridge2fork-db-credentials
          key: port
    - name: DB_NAME
      valueFrom:
        secretKeyRef:
          name: fridge2fork-db-credentials
          key: database
    - name: DB_USER
      valueFrom:
        secretKeyRef:
          name: fridge2fork-db-credentials
          key: username
    - name: DB_PASSWORD
      valueFrom:
        secretKeyRef:
          name: fridge2fork-db-credentials
          key: password

# Database Configuration
database:
  enabled: true
  global:
    postgresql:
      auth:
        username: refridge2fork
        database: refridge2fork
        existingSecret: fridge2fork-db-credentials

  primary:
    persistence:
      size: 10Gi
      volumeName: "data"
    resources:
      requests:
        memory: "512Mi"
        cpu: "250m"
      limits:
        memory: "1Gi"
        cpu: "500m"