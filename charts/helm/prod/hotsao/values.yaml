#########################################################################
# Hotsao (핫사오) Helm Chart Values
# Subchart 기반 구조: go-scraper, server, web, redis, rabbitmq
#########################################################################

#########################################################################
# Go Scraper - CronJob 기반 핫딜 크롤러
#########################################################################
go-scraper:
  enabled: true
  image:
    repository: ggorockee/hotsao-go-scraper
    pullPolicy: IfNotPresent
    tag: "latest"

  serviceAccount:
    create: true
    automount: true

  podLabels:
    job: hotsao-go-scraper
    service: hotsao-go-scraper

  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi

  configMap:
    enabled: true
    data:
      TIMEZONE: "Asia/Seoul"
      LOG_LEVEL: "info"

  # ExternalSecret configuration (GCP Secret Manager)
  externalSecret:
    enabled: true
    secretStore: "gcpsm-secret-store"
    secretKey: "prod-hotsao-credentials"
    targetSecretName: "prod-hotsao-credentials"
    refreshInterval: "1h"

  # Secret configuration
  secret:
    enabled: true
    names:
      - prod-hotsao-credentials

  # CronJob configuration
  runner:
    enabled: true
    scrapers:
      - name: ppomppu
        schedule: "0 * * * *"
        timeZone: "Asia/Seoul"

#########################################################################
# Server - Go Fiber v2 API (추후 구현)
#########################################################################
server:
  enabled: false

#########################################################################
# Web - Frontend (추후 구현)
#########################################################################
web:
  enabled: false

#########################################################################
# Redis
#########################################################################
redis:
  enabled: true
  architecture: standalone
  auth:
    enabled: true
    password: "hotsao-redis-password"
  master:
    persistence:
      enabled: false

#########################################################################
# RabbitMQ
#########################################################################
rabbitmq:
  enabled: true
  image:
    registry: docker.io
    repository: rabbitmq
    tag: "3.13-management"
  auth:
    username: hotsao
    password: "hotsao-rabbitmq-password"
  persistence:
    enabled: false
